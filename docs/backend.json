
{
  "entities": {
    "Vendor": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Vendor",
      "type": "object",
      "description": "Represents a vendor's public profile.",
      "properties": {
        "id": { "type": "string", "description": "The vendor's UID, same as the user UID." },
        "name": { "type": "string", "description": "The public name of the vendor's company." },
        "slug": { "type": "string", "description": "URL-friendly version of the company name." },
        "tagline": { "type": "string", "description": "A short, catchy tagline for the vendor." },
        "description": { "type": "string", "description": "A detailed public description of the vendor's services." },
        "state": { "type": "string", "description": "The state where the vendor operates." },
        "city": { "type": "string", "description": "The city where the vendor operates." },
        "categoryIds": { "type": "array", "description": "Array of category IDs this vendor belongs to.", "items": { "type": "string" } },
        "profileImage": { "type": "string", "description": "URL of the vendor's main profile picture." },
        "bannerImage": { "type": "string", "description": "URL of the vendor's banner image for their profile page." },
        "contactEmail": { "type": "string", "format": "email", "description": "Public contact email for the vendor." },
        "rating": { "type": "number", "description": "Average rating from customer reviews." },
        "reviewsCount": { "type": "integer", "description": "Total number of reviews." }
      },
      "required": ["id", "name", "slug", "description", "state", "city"]
    },
    "Service": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Service",
      "type": "object",
      "description": "Represents a specific service offered by a vendor.",
      "properties": {
        "id": { "type": "string", "description": "Unique ID for the service." },
        "name": { "type": "string", "description": "Name of the service." },
        "description": { "type": "string", "description": "Detailed description of the service." },
        "category": { "type": "string", "description": "The name of the category this service falls under." },
        "photos": { "type": "array", "description": "Array of image URLs for the service.", "items": { "type": "string" } },
        "priceRange": { "type": "string", "description": "A textual description of the price, e.g., '$100-$200' or 'Starting at $50/hr'." }
      },
      "required": ["id", "name", "description", "category", "photos"]
    },
    "Client": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Client",
      "type": "object",
      "description": "Represents a client's private profile data.",
      "properties": {
        "favoriteVendorIds": {
          "type": "array",
          "description": "Array of composite keys ('vendorId_serviceId') for favorite services.",
          "items": { "type": "string" }
        }
      }
    },
    "User": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "User",
      "type": "object",
      "description": "Represents a user account's private data.",
      "properties": {
        "id": { "type": "string", "description": "The user's UID." },
        "email": { "type": "string", "format": "email" },
        "firstName": { "type": "string" },
        "lastName": { "type": "string" },
        "accountType": { "type": "string", "enum": ["client", "vendor"] }
      },
      "required": ["id", "email", "accountType"]
    },
    "Category": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Category",
      "type": "object",
      "description": "Represents a category of vendor services.",
      "properties": {
        "id": { "type": "string" },
        "name": { "type": "string" },
        "description": { "type": "string" }
      },
      "required": ["id", "name"]
    },
    "SuggestedCategory": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "SuggestedCategory",
      "type": "object",
      "description": "Represents a suggested category submitted by a user.",
      "properties": {
        "id": { "type": "string" },
        "name": { "type": "string" },
        "description": { "type": "string" },
        "userId": { "type": "string", "description": "UID of the user who suggested it." }
      },
      "required": ["id", "name", "description", "userId"]
    }
  },
  "auth": {
    "providers": ["password", "anonymous", "google"]
  },
  "firestore": {
    "structure": [
      {
        "path": "/users/{userId}",
        "definition": { "entityName": "User", "schema": { "$ref": "#/entities/User" }, "description": "Stores private user account information." },
        "subcollections": [
          {
            "path": "client/profile",
            "definition": { "entityName": "Client", "schema": { "$ref": "#/entities/Client" }, "description": "Stores a client's private profile, like favorites." }
          }
        ]
      },
      {
        "path": "/vendors/{vendorId}",
        "definition": { "entityName": "Vendor", "schema": { "$ref": "#/entities/Vendor" }, "description": "Stores public-facing vendor profiles. The vendorId is the same as the user's UID." },
        "subcollections": [
          {
            "path": "services/{serviceId}",
            "definition": { "entityName": "Service", "schema": { "$ref": "#/entities/Service" }, "description": "Stores the services offered by a specific vendor." }
          }
        ]
      },
      {
        "path": "/categories/{categoryId}",
        "definition": { "entityName": "Category", "schema": { "$ref": "#/entities/Category" }, "description": "Stores service categories. Publicly readable." }
      },
      {
        "path": "/suggested_categories/{suggestedCategoryId}",
        "definition": { "entityName": "SuggestedCategory", "schema": { "$ref": "#/entities/SuggestedCategory" }, "description": "Stores user-submitted category suggestions." }
      }
    ],
    "reasoning": "This structure separates private user data from public vendor data. Public-facing vendor profiles and their services are in top-level collections for easy, efficient, and secure querying by clients. Private user data, like account info and a client's favorites, are kept in a separate 'users' collection, protected by security rules."
  }
}
