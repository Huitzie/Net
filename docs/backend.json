
{
  "entities": {
    "Vendor": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Vendor",
      "type": "object",
      "description": "Represents a vendor's public profile.",
      "properties": {
        "id": { "type": "string", "description": "The vendor's UID, same as the user UID." },
        "name": { "type": "string", "description": "The public name of the vendor's company." },
        "slug": { "type": "string", "description": "URL-friendly version of the company name." },
        "tagline": { "type": "string", "description": "A short, catchy tagline for the vendor." },
        "description": { "type": "string", "description": "A detailed public description of the vendor's services." },
        "state": { "type": "string", "description": "The state where the vendor operates." },
        "city": { "type": "string", "description": "The city where the vendor operates." },
        "categoryIds": { "type": "array", "description": "Array of category IDs this vendor belongs to.", "items": { "type": "string" } },
        "profileImage": { "type": "string", "description": "URL of the vendor's main profile picture." },
        "bannerImage": { "type": "string", "description": "URL of the vendor's banner image for their profile page." },
        "contactEmail": { "type": "string", "format": "email", "description": "Public contact email for the vendor." },
        "rating": { "type": "number", "description": "Average rating from customer reviews." },
        "reviewsCount": { "type": "integer", "description": "Total number of reviews." }
      },
      "required": ["id", "name", "slug", "description", "state", "city"]
    },
    "Service": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Service",
      "type": "object",
      "description": "Represents a specific service offered by a vendor.",
      "properties": {
        "id": { "type": "string", "description": "Unique ID for the service." },
        "name": { "type": "string", "description": "Name of the service." },
        "description": { "type": "string", "description": "Detailed description of the service." },
        "category": { "type": "string", "description": "The name of the category this service falls under." },
        "photos": { "type": "array", "description": "Array of image URLs for the service.", "items": { "type": "string" } },
        "priceRange": { "type": "string", "description": "A textual description of the price, e.g., '$100-$200' or 'Starting at $50/hr'." }
      },
      "required": ["id", "name", "description", "category", "photos"]
    },
    "Client": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Client",
      "type": "object",
      "description": "Represents a client's private profile data.",
      "properties": {
        "favoriteVendorIds": {
          "type": "array",
          "description": "Array of composite keys ('vendorId_serviceId') for favorite services.",
          "items": { "type": "string" }
        }
      }
    },
    "User": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "User",
      "type": "object",
      "description": "Represents a user account's private data.",
      "properties": {
        "id": { "type": "string", "description": "The user's UID." },
        "email": { "type": "string", "format": "email" },
        "firstName": { "type": "string" },
        "lastName": { "type": "string" },
        "accountType": { "type": "string", "enum": ["client", "vendor"] }
      },
      "required": ["id", "email", "accountType"]
    },
    "Category": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Category",
      "type": "object",
      "description": "Represents a category of vendor services.",
      "properties": {
        "id": { "type": "string" },
        "name": { "type": "string" },
        "description": { "type": "string" }
      },
      "required": ["id", "name"]
    },
    "SuggestedCategory": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "SuggestedCategory",
      "type": "object",
      "description": "Represents a suggested category submitted by a user.",
      "properties": {
        "id": { "type": "string" },
        "name": { "type": "string" },
        "description": { "type": "string" },
        "userId": { "type": "string", "description": "UID of the user who suggested it." }
      },
      "required": ["id", "name", "description", "userId"]
    },
    "Conversation": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Conversation",
      "type": "object",
      "description": "A conversation thread between two or more users.",
      "properties": {
        "id": { "type": "string" },
        "participantIds": { "type": "array", "items": { "type": "string" }, "description": "UIDs of the users in the conversation." },
        "lastMessage": { "type": "string", "description": "The text of the last message sent." },
        "lastMessageTimestamp": { "type": "string", "format": "date-time", "description": "Timestamp of the last message." },
        "readBy": { "type": "array", "items": { "type": "string" }, "description": "List of user UIDs who have read the last message." }
      },
      "required": ["id", "participantIds", "lastMessageTimestamp"]
    },
    "Message": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Message",
      "type": "object",
      "description": "A single message within a conversation.",
      "properties": {
        "id": { "type": "string" },
        "senderId": { "type": "string", "description": "UID of the message sender." },
        "text": { "type": "string" },
        "timestamp": { "type": "string", "format": "date-time" }
      },
      "required": ["id", "senderId", "text", "timestamp"]
    },
    "Event": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Event",
      "type": "object",
      "description": "A client-created event to organize vendors.",
      "properties": {
        "id": { "type": "string" },
        "name": { "type": "string" },
        "date": { "type": "string", "format": "date" },
        "clientId": { "type": "string" },
        "favoritedVendorServiceIds": { "type": "array", "items": { "type": "string" } }
      },
      "required": ["id", "name", "clientId"]
    },
    "Rating": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Rating",
      "type": "object",
      "description": "A rating given by a client to a vendor for a specific service or booking.",
      "properties": {
        "id": { "type": "string" },
        "clientId": { "type": "string" },
        "vendorId": { "type": "string" },
        "bookingId": { "type": "string", "description": "The ID of the confirmed booking this rating is for." },
        "rating": { "type": "number", "minimum": 1, "maximum": 10 },
        "comment": { "type": "string" },
        "timestamp": { "type": "string", "format": "date-time" }
      },
      "required": ["id", "clientId", "vendorId", "bookingId", "rating", "timestamp"]
    },
    "Booking": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Booking",
      "type": "object",
      "description": "Represents a service agreement between a client and a vendor.",
      "properties": {
        "id": { "type": "string" },
        "clientId": { "type": "string" },
        "vendorId": { "type": "string" },
        "serviceId": { "type": "string" },
        "status": { "type": "string", "enum": ["pending", "confirmed_by_vendor", "confirmed_by_client", "hired", "completed", "cancelled"] },
        "clientConfirmation": { "type": "boolean", "default": false },
        "vendorConfirmation": { "type": "boolean", "default": false }
      },
      "required": ["id", "clientId", "vendorId", "serviceId", "status"]
    },
    "Contract": {
        "$schema": "http://json-schema.org/draft-07/schema#",
        "title": "Contract",
        "type": "object",
        "description": "Represents a service agreement contract generated by the AI.",
        "properties": {
          "id": { "type": "string" },
          "vendorId": { "type": "string" },
          "clientId": { "type": "string" },
          "serviceDetails": { "type": "string" },
          "paymentTerms": { "type": "string" },
          "contractText": { "type": "string" },
          "createdAt": { "type": "string", "format": "date-time" }
        },
        "required": ["id", "vendorId", "contractText", "createdAt"]
      }
  },
  "auth": {
    "providers": ["password", "anonymous", "google"]
  },
  "firestore": {
    "structure": [
      {
        "path": "/users/{userId}",
        "definition": { "entityName": "User", "schema": { "$ref": "#/entities/User" }, "description": "Stores private user account information." },
        "subcollections": [
          {
            "path": "client/profile",
            "definition": { "entityName": "Client", "schema": { "$ref": "#/entities/Client" }, "description": "Stores a client's private profile, like favorites." }
          },
          {
            "path": "events/{eventId}",
            "definition": { "entityName": "Event", "schema": { "$ref": "#/entities/Event" }, "description": "Stores client-created events for organizing vendors." }
          }
        ]
      },
      {
        "path": "/vendors/{vendorId}",
        "definition": { "entityName": "Vendor", "schema": { "$ref": "#/entities/Vendor" }, "description": "Stores public-facing vendor profiles. The vendorId is the same as the user's UID." },
        "subcollections": [
          {
            "path": "services/{serviceId}",
            "definition": { "entityName": "Service", "schema": { "$ref": "#/entities/Service" }, "description": "Stores the services offered by a specific vendor." }
          },
          {
            "path": "ratings/{ratingId}",
            "definition": { "entityName": "Rating", "schema": { "$ref": "#/entities/Rating" }, "description": "Stores ratings for this vendor." }
          },
           {
            "path": "contracts/{contractId}",
            "definition": { "entityName": "Contract", "schema": { "$ref": "#/entities/Contract" }, "description": "Stores AI-generated contracts for this vendor." }
          }
        ]
      },
      {
        "path": "/categories/{categoryId}",
        "definition": { "entityName": "Category", "schema": { "$ref": "#/entities/Category" }, "description": "Stores service categories. Publicly readable." }
      },
      {
        "path": "/suggested_categories/{suggestedCategoryId}",
        "definition": { "entityName": "SuggestedCategory", "schema": { "$ref": "#/entities/SuggestedCategory" }, "description": "Stores user-submitted category suggestions." }
      },
      {
        "path": "/conversations/{conversationId}",
        "definition": { "entityName": "Conversation", "schema": { "$ref": "#/entities/Conversation" }, "description": "Stores metadata for a conversation thread." },
        "subcollections": [
          {
            "path": "messages/{messageId}",
            "definition": { "entityName": "Message", "schema": { "$ref": "#/entities/Message" }, "description": "Stores all messages in a conversation." }
          }
        ]
      },
      {
        "path": "/bookings/{bookingId}",
        "definition": { "entityName": "Booking", "schema": { "$ref": "#/entities/Booking" }, "description": "Stores booking agreements between clients and vendors." }
      }
    ],
    "reasoning": "This structure separates private user data from public vendor data. Public-facing vendor profiles and their services are in top-level collections for easy, efficient, and secure querying by clients. Private user data, like account info and a client's favorites, are kept in a separate 'users' collection, protected by security rules. Conversations, bookings, and ratings are in their own top-level collections to allow for flexible querying and security rules independent of the user or vendor documents."
  }
}
